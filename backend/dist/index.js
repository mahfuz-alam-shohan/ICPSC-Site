"use strict";
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const express_1 = __importDefault(require("express"));
const cors_1 = __importDefault(require("cors"));
const helmet_1 = __importDefault(require("helmet"));
const path_1 = __importDefault(require("path"));
const db_1 = __importDefault(require("./config/db"));
const routes_1 = __importDefault(require("./modules/auth/routes"));
const routes_2 = __importDefault(require("./modules/students/routes"));
const routes_3 = __importDefault(require("./modules/teachers/routes"));
const routes_4 = __importDefault(require("./modules/attendance/routes"));
const routes_5 = __importDefault(require("./modules/fees/routes"));
const routes_6 = __importDefault(require("./modules/results/routes"));
const routes_7 = __importDefault(require("./modules/users/routes"));
const routes_8 = __importDefault(require("./modules/roles/routes"));
const routes_9 = __importDefault(require("./modules/librarians/routes"));
const routes_10 = __importDefault(require("./modules/staff/routes"));
const routes_11 = __importDefault(require("./modules/drivers/routes"));
const routes_12 = __importDefault(require("./modules/officers/routes"));
const routes_13 = __importDefault(require("./modules/applications/routes"));
const routes_14 = __importDefault(require("./modules/registrations/routes"));
const routes_15 = __importDefault(require("./modules/dashboard/routes"));
(0, db_1.default)();
const app = (0, express_1.default)();
app.use((0, cors_1.default)());
app.use((0, helmet_1.default)());
app.use(express_1.default.json());
app.use("/api/auth", routes_1.default);
app.use("/api/students", routes_2.default);
app.use("/api/teachers", routes_3.default);
app.use("/api/attendance", routes_4.default);
app.use("/api/fees", routes_5.default);
app.use("/api/results", routes_6.default);
app.use("/api/users", routes_7.default);
app.use("/api/roles", routes_8.default);
app.use("/api/librarians", routes_9.default);
app.use("/api/staff", routes_10.default);
app.use("/api/drivers", routes_11.default);
app.use("/api/officers", routes_12.default);
app.use("/api/applications", routes_13.default);
app.use("/api/registrations", routes_14.default);
app.use("/api/dashboard", routes_15.default);
// Serve frontend static files
const frontendDir = path_1.default.join(__dirname, "../../frontend");
app.use(express_1.default.static(frontendDir));
app.listen(process.env.PORT || 3000, () => {
    console.log("Server running");
});
